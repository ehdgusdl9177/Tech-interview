# HTTP & HTTPS

## HTTP(HyperText Transfer Protocol)
- 인터넷 상에서 클라이언트와 서버가 자원을 주고 받을 때 쓰는 통신 규약
- HTTP는 텍스트 교환이므로, 누군가 네트워크에서 신호를 가로채면 내용이 노출되는 보안 이슈가 존재한다.
- 이런 보안 문제를 해결해주는 프로토콜이 "HTTPS"

## HTTPS(HyperText Transfer Protocol Secure)
- 인터넷 상에서 정보를 암호화하는 SSL 프로토콜을 사용해 클라이언트와 서버가 자원을 주고 받을 때 쓰는 통신 규약
- HTTPS는 텍스트를 암호화한다.(공개키 암호화 방식으로)

- ### 공개키, 대칭키 설명 
  - #### 공개키(Public Key)
    - 암호화와 복호화에 사용하는 암호키를 분리한 알고리즘
    - 자신이 가지고 있는 고유한 암호키(비밀키)로만 복호화할 수 있는 암호키(공개키)를 대중에 공개함
  - #### 대칭키(Symmetric Key)
    - 암호화와 복호화에 같은 암호키(대칭키)를 사용하는 알고리즘
    - 동일한 키를 주고받기 때문에, 매우 빠르다는 장점이 있다.
    - 하지만, 대칭키 전달과정에서 해킹 위험에 노출된다.
- ### 공개키 암호화 방식 진행 과정
  1. A가 웹 상에 공개된 "B의 공개키"를 이용해 평문을 암호화하여 B에게 보냄
  2. B는 자신의 비밀키로 복호화한 평문을 확인, A의 공개키로 응답을 암호화하여 A에게 보냄
  3. A는 자신의 비밀키로 암호화된 응답문을 복호화함 

- 대칭키의 단점을 완벽하게 해결했지만, 암호화 복호화가 매우 복잡함
- (암호화하는 키가 복호화하는 키가 서로 다르기 때문
- ### 대칭키와 공개키 암호화 방식을 적절히 혼합해보면?
  - SSL 탄생의 시초가 됨
  1. A가 B의 공개키로 암호화 통신에 사용할 대칭키를 암호화하고 B에게 보냄
  2. B는 암호문을 받고, 자신의 비밀키로 복호화함
  3. B는 A로부터 얻은 대칭키로 A에게 보낼 평문을 암호화하여 A에게 보냄
  4. A는 자신의 대칭키로 암호문을 복호화함
  5. 앞으로 이 대칭키로 암호화를 통신함
- 즉, 대칭키를 주고받을 때만 공개키 암호화 방식을 사용하고 이후에는 계속 대칭키 암호화 방식으로 통신하는 것!

## HTTPS 통신 흐름
1. 애플리케이션 서버(A)를 만드는 기업은 HTTPS를 적용하기 위해 공개키와 개인키를 만든다.
2. 신뢰할 수 있는 CA 기업을 선택하고, 그 기업에게 내 공개키 관리를 부탁하며 계약을 한다.

CA란?: Certificate Authority로, 공개키를 저장해주는 신뢰성이 검증된 민간기업

3. 계약 완료된 CA 기업은 해당 기업의 이름, A서버 공개키, 공개키 암호화 방법을 담은 인증서를 만들고, 해당 인증서를 CA 기업의 개인키로 암호화해서 A 서버에게 제공한다.
4. A서버는 암호화된 인증서를 갖게 되었다. 이제 A 서버는 A서버의 공개키로 암호화된 HTTPS 요청이 아닌 요청이 오면, 이 암호화된 인증서를 클라이언트에게 건내준다.
5. 클라이언트는 main.html 파일을 달라고 A서버에 요청했다고 가정하자. HTTPS 요청이 아니기 때문에 CA 기업이 A 서버의 정보를 CA 기업의 개인키로 암호화한 인증서를 받게 된다.

CA 기업의 공개키는 브라우저가 이미 알고 있다.(세계적으로 신뢰할 수 있는 기업으로 등록되어 있기 때문에, 브라우저가 인증서를 탐색하여 해독이 가능한 것)

6. 브라우저는 해독한 뒤 A 서버의 공개키를 얻게 되었다. 이제 A서버와 통신할 때는 얻은 A서버의 공개키로 암호화해서 요청을 날리게 된다.

HTTPS도 무조건 안전한 것은 아니다.(신뢰받는 CA 기업이 아닌 자체 인증서 발근한 경우 등)

이때는 HTTPS지만 브라우저에서 주의 요함, 안전하지 않은 사이트 와 같은 알림으로 주의 받게 된다.

### HTTP 상태코드
- 200: OK 요청이 성공적으로 되었습니다.
- 201: Created 요청이 성공적이며 새로운 리소스가 생성되었습니다.
- 400: Bad Request 서버가 요청의 구문을 인식하지 못했습니다.
- 401: Unauthorized 이 요청은 인증이 필요합니다.
- 403: Forbidden 서버가 요청을 거부합니다.
- 404: Not Found 서버가 요청한 페이지를 찾을 수 없습니다.(API가 잘못되었을 때)
- 500: Internal Server Error 서버가 오류를 발생하여 요청을 수행할 수 없습니다.
